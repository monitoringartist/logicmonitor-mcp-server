# ========================================
# LogicMonitor MCP Server Configuration
# ========================================
# Copy this file to .env and update with your actual values
# Environment variables take precedence over CLI flags

# ========================================
# LOGICMONITOR API (REQUIRED)
# ========================================

# Your LogicMonitor company/account name (subdomain)
# Example: if your portal is "mycompany.logicmonitor.com", use "mycompany"
# CLI flag: --lm-company
LM_COMPANY=your-company-name

# LogicMonitor API Bearer Token
# Generate at: Settings > Users & Roles > Bearers
# CLI flag: --lm-bearer-token
LM_BEARER_TOKEN=your-bearer-token-here

# ========================================
# TRANSPORT OPTIONS
# ========================================

# Transport type: stdio, sse, or streamable-http
# - stdio: Standard I/O (default, for Claude Desktop)
# - sse: Server-Sent Events (for web/remote clients)
# - streamable-http: Streamable HTTP (experimental)
# CLI flag: -t, --transport
# Default: stdio
MCP_TRANSPORT=stdio

# Server address for SSE/HTTP transports
# Format: host:port
# CLI flag: --address
# Default: localhost:3000
MCP_ADDRESS=localhost:3000

# Base path for the server (optional)
# CLI flag: --base-path
#MCP_BASE_PATH=/api

# Endpoint path for streamable-http transport
# CLI flag: --endpoint-path
# Default: /mcp
MCP_ENDPOINT_PATH=/mcp

# ========================================
# TLS CONFIGURATION (streamable-http transport only)
# ========================================

# Path to TLS certificate file for HTTPS
# CLI flag: --server.tls-cert-file
# If both cert and key are configured, server uses HTTPS
# If unconfigured, server uses HTTP
#MCP_TLS_CERT_FILE=/path/to/cert.pem

# Path to TLS private key file for HTTPS
# CLI flag: --server.tls-key-file
# Both cert and key must be configured to enable HTTPS
#MCP_TLS_KEY_FILE=/path/to/key.pem

# ========================================
# DEBUG AND LOGGING
# ========================================

# Enable debug mode with detailed logging
# CLI flag: --debug
# Options: true | false
# Default: false
MCP_DEBUG=false

# Log format
# CLI flag: --log-format
# Options:
#   - json: Machine-friendly JSON format
#   - human: Human-friendly format with emoticons
# Default: human
MCP_LOG_FORMAT=human

# Log level
# CLI flag: --log-level
# Options: debug | info | warn | error
# - debug: All messages (most verbose)
# - info: Informational messages and above
# - warn: Warnings and errors only
# - error: Errors only (least verbose)
# Default: info
MCP_LOG_LEVEL=info

# ========================================
# TOOL CONFIGURATION
# ========================================

# Comma-separated list of enabled tools
# CLI flag: --enabled-tools
# Example: list_devices,get_device,list_alerts
# Default: all tools enabled
#MCP_ENABLED_TOOLS=list_devices,get_device,list_alerts

# Enable only read-only tools (list, get, search operations)
# CLI flag: --read-only
# Options: true | false
# - true: Only expose read-only tools (safer, recommended)
# - false: Expose all tools including write operations
# Default: true (safer)
MCP_READ_ONLY=true

# Disable search tools
# CLI flag: --disable-search
# Options: true | false
# Default: false
MCP_DISABLE_SEARCH=false

# ========================================
# HTTP/SSE SERVER OPTIONS (Optional)
# Only needed when using SSE or HTTP transports with OAuth authentication
# These variables are not part of the MCP_ namespace as they're
# server-specific rather than MCP protocol configuration
# ========================================

# Node environment
# Options: development | production
NODE_ENV=development

# Base URL for OAuth callbacks and metadata endpoints
# Used to generate absolute URLs for OAuth redirects
# Should match the host:port from MCP_ADDRESS
# Default: http://localhost:3000
BASE_URL=http://localhost:3000

# CORS Configuration
# Comma-separated list of allowed origins
# Use * for development, specific domains for production
# Default: * (allow all)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Transport mode for multi-transport server
# Options: both | http-only | sse-only
# Default: both
TRANSPORT_MODE=both

# ========================================
# OAUTH/OIDC AUTHENTICATION (Optional)
# Required for remote HTTP/SSE servers
# Supports multiple OAuth providers
# ========================================

# OAuth provider type
# Options: github | google | azure | okta | auth0 | custom
# Default: Not set (OAuth disabled)
OAUTH_PROVIDER=github

# OAuth client credentials
# Obtain these from your OAuth provider's developer console
OAUTH_CLIENT_ID=your-oauth-client-id
OAUTH_CLIENT_SECRET=your-oauth-client-secret

# OAuth session secret (for encrypting session cookies)
# Generate a strong random string for production
# This can also be set via SESSION_SECRET for backward compatibility
OAUTH_SESSION_SECRET=change-this-to-a-random-secure-string

# OAuth callback URL
# Must be registered with your OAuth provider
# Should match the host:port from MCP_ADDRESS
# Default: http://localhost:3000/auth/callback
OAUTH_CALLBACK_URL=http://localhost:3000/auth/callback

# OAuth scopes (comma-separated)
# Different providers support different scopes
# GitHub example: user:email,read:user
# Google example: profile,email
# Azure example: openid,profile,email
# Default: Provider-specific defaults
OAUTH_SCOPE=user:email

# ========================================
# PROVIDER-SPECIFIC OAUTH CONFIGURATION
# ========================================

# --- GITHUB OAUTH (provider=github) ---
# Create OAuth App at: https://github.com/settings/developers
# Scopes: user:email, read:user, repo (optional)
# Note: GitHub doesn't support refresh tokens in standard OAuth flow

# --- GOOGLE OAUTH (provider=google) ---
# Create OAuth App at: https://console.cloud.google.com/apis/credentials
# Scopes: profile, email, openid
# Enable Google+ API for user profile access

# --- AZURE AD (provider=azure) ---
# Create App Registration at: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
# Scopes: openid, profile, email, User.Read
# Tenant ID (common, organizations, consumers, or specific tenant ID)
OAUTH_AZURE_TENANT_ID=common

# --- OKTA (provider=okta) ---
# Create OAuth App in Okta Admin Console
# Scopes: openid, profile, email
# Your Okta domain (e.g., dev-12345.okta.com)
OAUTH_OKTA_DOMAIN=your-domain.okta.com

# --- AUTH0 (provider=auth0) ---
# Create Application in Auth0 Dashboard
# Scopes: openid, profile, email
# Your Auth0 domain (e.g., yourapp.auth0.com or yourapp.us.auth0.com)
OAUTH_AUTH0_DOMAIN=your-domain.auth0.com

# --- CUSTOM OAUTH PROVIDER (provider=custom) ---
# For custom OAuth2/OIDC providers
# All three endpoints are required for custom providers
OAUTH_AUTHORIZATION_URL=https://provider.com/oauth2/authorize
OAUTH_TOKEN_URL=https://provider.com/oauth2/token
OAUTH_USER_PROFILE_URL=https://provider.com/oauth2/userinfo

# ========================================
# TOKEN REFRESH CONFIGURATION
# ========================================

# Enable automatic token refresh in background
# Options: true | false
# Default: true
# Set to false to disable token refresh (tokens will expire naturally)
OAUTH_TOKEN_REFRESH=true

# Token refresh buffer (minutes before expiry to trigger refresh)
# Default: 5 minutes
# Lower values = more aggressive refresh (less chance of expiry)
# Higher values = fewer refresh requests (but higher risk of expiry)
OAUTH_TOKEN_REFRESH_BUFFER=5
